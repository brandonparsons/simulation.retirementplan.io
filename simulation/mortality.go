package simulation

import "math/rand"

// Ages 0 - 120
// Each row: [male_prob, female_prob]
var mortalityTable = [][]float64{
	[]float64{0.007379, 0.006096},
	[]float64{0.000494, 0.000434},
	[]float64{0.000317, 0.000256},
	[]float64{0.000241, 0.000192},
	[]float64{0.000200, 0.000148},
	[]float64{0.000179, 0.000136},
	[]float64{0.000166, 0.000128},
	[]float64{0.000152, 0.000122},
	[]float64{0.000133, 0.000115},
	[]float64{0.000108, 0.000106},
	[]float64{8.90e-05, 0.000100},
	[]float64{9.40e-05, 0.000102},
	[]float64{0.000145, 0.000120},
	[]float64{0.000252, 0.000157},
	[]float64{0.000401, 0.000209},
	[]float64{0.000563, 0.000267},
	[]float64{0.000719, 0.000323},
	[]float64{0.000873, 0.000369},
	[]float64{0.001017, 0.000401},
	[]float64{0.001148, 0.000422},
	[]float64{0.001285, 0.000441},
	[]float64{0.001412, 0.000463},
	[]float64{0.001493, 0.000483},
	[]float64{0.001513, 0.000499},
	[]float64{0.001487, 0.000513},
	[]float64{0.001446, 0.000528},
	[]float64{0.001412, 0.000544},
	[]float64{0.001389, 0.000563},
	[]float64{0.001388, 0.000585},
	[]float64{0.001405, 0.000612},
	[]float64{0.001428, 0.000642},
	[]float64{0.001453, 0.000678},
	[]float64{0.001487, 0.000721},
	[]float64{0.001529, 0.000771},
	[]float64{0.001584, 0.000830},
	[]float64{0.001651, 0.000896},
	[]float64{0.001737, 0.000971},
	[]float64{0.001845, 0.001056},
	[]float64{0.001979, 0.001153},
	[]float64{0.002140, 0.001260},
	[]float64{0.002323, 0.001377},
	[]float64{0.002526, 0.001506},
	[]float64{0.002750, 0.001650},
	[]float64{0.002993, 0.001810},
	[]float64{0.003257, 0.001985},
	[]float64{0.003543, 0.002174},
	[]float64{0.003856, 0.002375},
	[]float64{0.004208, 0.002582},
	[]float64{0.004603, 0.002794},
	[]float64{0.005037, 0.003012},
	[]float64{0.005512, 0.003255},
	[]float64{0.006008, 0.003517},
	[]float64{0.006500, 0.003782},
	[]float64{0.006977, 0.004045},
	[]float64{0.007456, 0.004318},
	[]float64{0.007975, 0.004619},
	[]float64{0.008551, 0.004965},
	[]float64{0.009174, 0.005366},
	[]float64{0.009848, 0.005830},
	[]float64{0.010584, 0.006358},
	[]float64{0.011407, 0.006961},
	[]float64{0.012315, 0.007624},
	[]float64{0.013289, 0.008322},
	[]float64{0.014326, 0.009046},
	[]float64{0.015453, 0.009822},
	[]float64{0.016723, 0.010698},
	[]float64{0.018154, 0.011702},
	[]float64{0.019732, 0.012832},
	[]float64{0.021468, 0.014103},
	[]float64{0.023387, 0.015526},
	[]float64{0.025579, 0.017163},
	[]float64{0.028032, 0.018987},
	[]float64{0.030665, 0.020922},
	[]float64{0.033467, 0.022951},
	[]float64{0.036519, 0.025147},
	[]float64{0.040010, 0.027709},
	[]float64{0.043987, 0.030659},
	[]float64{0.048359, 0.033861},
	[]float64{0.053140, 0.037311},
	[]float64{0.058434, 0.041132},
	[]float64{0.064457, 0.045561},
	[]float64{0.071259, 0.050698},
	[]float64{0.078741, 0.056486},
	[]float64{0.086923, 0.062971},
	[]float64{0.095935, 0.070259},
	[]float64{0.105937, 0.078471},
	[]float64{0.117063, 0.087713},
	[]float64{0.129407, 0.098064},
	[]float64{0.143015, 0.109578},
	[]float64{0.157889, 0.122283},
	[]float64{0.174013, 0.136190},
	[]float64{0.191354, 0.151300},
	[]float64{0.209867, 0.167602},
	[]float64{0.229502, 0.185078},
	[]float64{0.250198, 0.203700},
	[]float64{0.270750, 0.222541},
	[]float64{0.290814, 0.241317},
	[]float64{0.310029, 0.259716},
	[]float64{0.328021, 0.277409},
	[]float64{0.344422, 0.294054},
	[]float64{0.361644, 0.311697},
	[]float64{0.379726, 0.330399},
	[]float64{0.398712, 0.350223},
	[]float64{0.418648, 0.371236},
	[]float64{0.439580, 0.393510},
	[]float64{0.461559, 0.417121},
	[]float64{0.484637, 0.442148},
	[]float64{0.508869, 0.468677},
	[]float64{0.534312, 0.496798},
	[]float64{0.561028, 0.526605},
	[]float64{0.589079, 0.558202},
	[]float64{0.618533, 0.591694},
	[]float64{0.649460, 0.627196},
	[]float64{0.681933, 0.664827},
	[]float64{0.716029, 0.704717},
	[]float64{0.751831, 0.747000},
	[]float64{0.789422, 0.789422},
	[]float64{0.828894, 0.828894},
	[]float64{0.870338, 0.870338},
	[]float64{0.913855, 0.913855},
	[]float64{1.000000, 1.000000}}

// maleDiesAt Function for male mortality, delegates to diesAt function
// Receiver: None
// Params: age -- int
// Returns: bool
func maleDiesAt(age int) bool {
	return diesAt("male", age)
}

// femaleDiesAt Function for male mortality, delegates to diesAt function
// Receiver: None
// Params: age -- int
// Returns: bool
func femaleDiesAt(age int) bool {
	return diesAt("female", age)
}

// diesAt Rand-based function that determines if male/female lives or dies for
// a given age
// Receiver: None
// Params: age -- int
// Returns: bool
func diesAt(gender string, age int) bool {
	if age > 120 {
		return true
	}
	var genderKey int
	if gender == "male" {
		genderKey = 0
	} else {
		genderKey = 1
	}

	prob := mortalityTable[age][genderKey]

	if rand.Float64() < prob {
		return true
	} else {
		return false
	}
}
